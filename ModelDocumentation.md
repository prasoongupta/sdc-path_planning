#Path Planning Project## ObjectiveThe goal of this project is to build a path planner that takes a set of waypoints and drives a car on a 3 lane highway along with other car traffic.  It is required not to have any collision with other cars, not have any acceleration and jerk of 10m/s2 and 10m/s3 and also stay within the maximum permissible limits. It should not stay outside lane for more than 3s except during changing lanes when stuck behind a slow moving vehicle. ## ApproachI first started with code for trajectory generator and then added a behavior planner using cost functions to choose the best possible successor state. 1) Trajectory GenerationI used the splines header file discussed in the project walkthrough session instead of using polynomial trajectory generation as mentioned in the lectures to keep the implementation as simple as possible.The code used frenet coordinates and helper functions to convert from and to XY system.  The output of this code will be 50 path points with x,y coordinates. It makes use of any remaining path points generated in previous function call and adds on new ones. In order to generate new points, it first calculate the trajectory to be followed using spline function. The spline function uses last two points from previous path calculation as the starting points and then adds three more points at 30, 60 and 90 meters from the ending s value and intended lane provided by behavior planner. These five points in s,d coordinates are converted in xy system and further transformed into car coordinate system to avoid any issues during spline calculations. These five points in car coordinates are then fitted to the spline. I used this spline to calculate y values for desired x points. The x points are selected with appropriate distance apart to give the desired velocity. Fitted spline then converts these x points to give y and both x and y are converted from car to global system. These new points are added on to the remaining previous points to take the total to 50 in this case. To summarize, this part of the code calculates the trajectory points in global xy system based on input values of reference velocity and intended lane.2) Behavior plannerThis part of the code computes the intended lane for the car based on the input from the sensors data that gives out positions and speed of all other vehicles and our vehicle. It decides on the intended lane by looking at current lane and available states of Keeping lane, changing left if possible and changing right if possible. I used cost functions to optimize in choosing one of these three states. The cost functions include:1) Efficiency cost: this is the cost of moving slower relative to maximum speed limit. A high weight here ensures that we keep the car moving at decent speed and change lane when possible. 2) Collision cost: this is the cost of colliding with another vehicle measured by if distance is less than 3meters. It has very high weight to discourage any maneuver that can result in a collision. 3) Buffer cost: this is the cost measured by the distance from the vehicle behind when changing lane. If the distance is more than 90 then, this cost does not apply.4) Lane Change cost: There is also a cost to change lanes, so our car is not making lane changes just to get a little bit of increased speed but making the ride not as comfortable.5) State change cost: This cost will prevent from quick change in state just based on only a slightly better alternative. The car will avoid changing the direction of lane change while it is in process of executing it.  To find the best states, I calculated the total cost for each of the available states and select the state with the minimum cost. The lane corresponding to the best state is then our intended lane that is fed to the trajectory generator. I also look at if the car is too close to the car in front and adjust the speed down within acceptable acceleration and jerk values. 3) MPC ControllerWhile the car was able to change lanes with explicit rules and selecting the next best state, it is not always optimal when we should be looking at sequence of states to minimize the overall costs. An example would be if ego vehicle changes into a slower moving lane only to move to next lane further and pass the slow moving vehicle to move at maximum possible speed. The optimization problem can be framed as solver that gives out the vehicle states (s,d, v) in time horizon N. The costs to minimize are DSk which is distance in frenet coordinate from. Vk - Vmax is the difference in speed at different states. dk - not staying outside lanes so when dk - dk/4 * 4dk - d(k-1) - lateral accelerationvk - vk-1 - longitudinal accelerationI need to provide to simulatorN = 10dt = 0.02Set up cost and constraintsfg = cost 4 cost functions with some weightVariables in solver include sk, dk, vk, ak, Initialize variables, variables upperbound and lowerboundsconstraints upperbound and lowerboundOnce you get the solution, you have s, d, and v for N time steps. How do I make use of it? The output from the solver will be s and d positions for N time steps. I can look at 30m target distance to get s, d, v. at N time step. s + 30 m, get the waypoints and fit the spline. ##DiscussionIt was pretty interesting to work on this project. The project walkthrough gave a good start on generating trajectory with use of spline library and also the concept of continuity by using the previously generated unused points, as well as the conversion to car coordinates. 